<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="916px" preserveAspectRatio="none" style="width:1217px;height:916px;" version="1.1" viewBox="0 0 1217 916" width="1217px" zoomAndPan="magnify"><defs><filter height="300%" id="fnxm5vc7nk9sc" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="26" x2="26" y1="86.4883" y2="828.6309"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="220.5" x2="220.5" y1="86.4883" y2="828.6309"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="442.5" x2="442.5" y1="86.4883" y2="828.6309"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="641.5" x2="641.5" y1="86.4883" y2="828.6309"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1145.5" x2="1145.5" y1="86.4883" y2="828.6309"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="8" y="83.5352">user</text><ellipse cx="26" cy="13" fill="#FFFFFF" filter="url(#fnxm5vc7nk9sc)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M26,21 L26,48 M13,29 L39,29 M26,48 L13,63 M26,48 L39,63 " fill="none" filter="url(#fnxm5vc7nk9sc)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="30" x="8" y="841.166">user</text><ellipse cx="26" cy="854.1191" fill="#FFFFFF" filter="url(#fnxm5vc7nk9sc)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M26,862.1191 L26,889.1191 M13,870.1191 L39,870.1191 M26,889.1191 L13,904.1191 M26,889.1191 L39,904.1191 " fill="none" filter="url(#fnxm5vc7nk9sc)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#fnxm5vc7nk9sc)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="150.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="157.5" y="71.5352">DragonExBrowser</text><rect fill="#FEFECE" filter="url(#fnxm5vc7nk9sc)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="150.5" y="827.6309"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="123" x="157.5" y="848.166">DragonExBrowser</text><rect fill="#FEFECE" filter="url(#fnxm5vc7nk9sc)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="392.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="399.5" y="71.5352">AppBrowser</text><rect fill="#FEFECE" filter="url(#fnxm5vc7nk9sc)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="392.5" y="827.6309"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="399.5" y="848.166">AppBrowser</text><rect fill="#FFC0CB" filter="url(#fnxm5vc7nk9sc)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="597.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="604.5" y="71.5352">AppServer</text><rect fill="#FFC0CB" filter="url(#fnxm5vc7nk9sc)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="597.5" y="827.6309"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="604.5" y="848.166">AppServer</text><rect fill="#00FFFF" filter="url(#fnxm5vc7nk9sc)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="1081.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="1088.5" y="71.5352">DragonExServer</text><rect fill="#00FFFF" filter="url(#fnxm5vc7nk9sc)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="1081.5" y="827.6309"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="111" x="1088.5" y="848.166">DragonExServer</text><path d="M31,101.4883 L31,126.4883 L190,126.4883 L190,111.4883 L180,101.4883 L31,101.4883 " fill="#FBFB77" filter="url(#fnxm5vc7nk9sc)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M180,101.4883 L180,111.4883 L190,111.4883 L180,101.4883 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="37" y="119.0566">Login&amp;&amp;Get PayToken</text><polygon fill="#808080" points="209,153.1094,219,157.1094,209,161.1094,213,157.1094" style="stroke: #808080; stroke-width: 1.0;"/><line style="stroke: #808080; stroke-width: 1.0;" x1="26" x2="215" y1="157.1094" y2="157.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="33" y="152.3672">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="46" y="152.3672">agree login authorization</text><polygon fill="#808080" points="1134,182.4199,1144,186.4199,1134,190.4199,1138,186.4199" style="stroke: #808080; stroke-width: 1.0;"/><line style="stroke: #808080; stroke-width: 1.0;" x1="221" x2="1140" y1="186.4199" y2="186.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="228" y="181.6777">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="241" y="181.6777">login authorization request</text><polygon fill="#808080" points="232,211.7305,222,215.7305,232,219.7305,228,215.7305" style="stroke: #808080; stroke-width: 1.0;"/><line style="stroke: #808080; stroke-width: 1.0;" x1="226" x2="1145" y1="215.7305" y2="215.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="238" y="210.9883">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="251" y="210.9883">return login AccessCode</text><polygon fill="#808080" points="431,241.041,441,245.041,431,249.041,435,245.041" style="stroke: #808080; stroke-width: 1.0;"/><line style="stroke: #808080; stroke-width: 1.0;" x1="221" x2="437" y1="245.041" y2="245.041"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="228" y="240.2988">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="241" y="240.2988">jump to accessing party page</text><polygon fill="#808080" points="630,270.3516,640,274.3516,630,278.3516,634,274.3516" style="stroke: #808080; stroke-width: 1.0;"/><line style="stroke: #808080; stroke-width: 1.0;" x1="443" x2="636" y1="274.3516" y2="274.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="450" y="269.6094">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="463" y="269.6094">carry AccessCode request</text><polygon fill="#808080" points="1134,299.6621,1144,303.6621,1134,307.6621,1138,303.6621" style="stroke: #808080; stroke-width: 1.0;"/><line style="stroke: #808080; stroke-width: 1.0;" x1="642" x2="1140" y1="303.6621" y2="303.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="649" y="298.9199">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="662" y="298.9199">Login request</text><polygon fill="#808080" points="653,328.9727,643,332.9727,653,336.9727,649,332.9727" style="stroke: #808080; stroke-width: 1.0;"/><line style="stroke: #808080; stroke-width: 1.0;" x1="647" x2="1145" y1="332.9727" y2="332.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="659" y="328.2305">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="337" x="672" y="328.2305">authorized login，return AccessToken、PayToken,etc</text><line style="stroke: #808080; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="642" x2="684" y1="362.2832" y2="362.2832"/><line style="stroke: #808080; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="684" x2="684" y1="362.2832" y2="375.2832"/><line style="stroke: #808080; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="643" x2="684" y1="375.2832" y2="375.2832"/><polygon fill="#808080" points="653,371.2832,643,375.2832,653,379.2832,649,375.2832" style="stroke: #808080; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="649" y="357.541">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="477" x="662" y="357.541">save information like PayToken，and will use related info in future payment</text><polygon fill="#808080" points="454,400.5938,444,404.5938,454,408.5938,450,404.5938" style="stroke: #808080; stroke-width: 1.0;"/><line style="stroke: #808080; stroke-width: 1.0;" x1="448" x2="641" y1="404.5938" y2="404.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="460" y="399.8516">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="473" y="399.8516">authorized login success</text><path d="M647,442.5938 L647,467.5938 L898,467.5938 L898,452.5938 L888,442.5938 L647,442.5938 " fill="#FBFB77" filter="url(#fnxm5vc7nk9sc)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M888,442.5938 L888,452.5938 L898,452.5938 L888,442.5938 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="230" x="653" y="460.1621">user transfer to App server：Deposit</text><polygon fill="#0000FF" points="1134,509.5254,1144,513.5254,1134,517.5254,1138,513.5254" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="642" x2="1140" y1="513.5254" y2="513.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="649" y="501.1279">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="662" y="493.4727">call`/api/v1/open/pay/user2app/do/`</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="110" x="666" y="508.7832">require PayTOken</text><polygon fill="#0000FF" points="653,538.8359,643,542.8359,653,546.8359,649,542.8359" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0;" x1="647" x2="1145" y1="542.8359" y2="542.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="659" y="538.0938">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="672" y="538.0938">payment result</text><polygon fill="#0000FF" points="653,598.7676,643,602.7676,653,606.7676,649,602.7676" style="stroke: #0000FF; stroke-width: 1.0;"/><line style="stroke: #0000FF; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="647" x2="1145" y1="602.7676" y2="602.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="659" y="582.7148">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="672" y="567.4043">Asynchronous payment callbacks：</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="676" y="582.7148">callback success if received 200 HTTP status，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="341" x="676" y="598.0254">it will retry periodically within 35 hours if callback fail</text><path d="M647,665.7676 L647,690.7676 L931,690.7676 L931,675.7676 L921,665.7676 L647,665.7676 " fill="#FBFB77" filter="url(#fnxm5vc7nk9sc)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M921,665.7676 L921,675.7676 L931,675.7676 L921,665.7676 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="263" x="653" y="683.3359">App server transfer to the user：Withdraw</text><polygon fill="#FF4500" points="1134,717.3887,1144,721.3887,1134,725.3887,1138,721.3887" style="stroke: #FF4500; stroke-width: 1.0;"/><line style="stroke: #FF4500; stroke-width: 1.0;" x1="642" x2="1140" y1="721.3887" y2="721.3887"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="649" y="716.6465">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="248" x="662" y="716.6465">call`/api/v1/open/pay/app2user/do/`</text><polygon fill="#FF4500" points="653,746.6992,643,750.6992,653,754.6992,649,750.6992" style="stroke: #FF4500; stroke-width: 1.0;"/><line style="stroke: #FF4500; stroke-width: 1.0;" x1="647" x2="1145" y1="750.6992" y2="750.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="659" y="745.957">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="94" x="672" y="745.957">payment result</text><polygon fill="#FF4500" points="653,806.6309,643,810.6309,653,814.6309,649,810.6309" style="stroke: #FF4500; stroke-width: 1.0;"/><line style="stroke: #FF4500; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="647" x2="1145" y1="810.6309" y2="810.6309"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="9" x="659" y="790.5781">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="672" y="775.2676">Asynchronous payment callbacks：</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="296" x="676" y="790.5781">callback success if received 200 HTTP status，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="341" x="676" y="805.8887">it will retry periodically within 35 hours if callback fail</text><!--MD5=[c5e0ac0b4929d28a7ec006ddf12dab08]
@startuml DragonEx Open Platform - Open Account Payment Process

actor user as user #White
participant DragonExBrowser as dragonexBrowser
participant AppBrowser as appBrowser
participant AppServer as appServer #Pink
participant DragonExServer as dragonexServer #aqua

autonumber 1 1
note right of user: Login&&Get PayToken
user -[#Gray]> dragonexBrowser: agree login authorization 
dragonexBrowser -[#Gray]> dragonexServer: login authorization request
dragonexServer -[#Gray]> dragonexBrowser: return login AccessCode
dragonexBrowser -[#Gray]> appBrowser: jump to accessing party page 
appBrowser -[#Gray]> appServer: carry AccessCode request
appServer -[#Gray]> dragonexServer: Login request 
dragonexServer -[#Gray]> appServer: authorized login，return AccessToken、PayToken,etc
appServer -[#Gray]-> appServer: save information like PayToken，and will use related info in future payment 
appServer -[#Gray]> appBrowser: authorized login success
autonumber stop

|||

autonumber 1 1
note right of appServer: user transfer to App server：Deposit
appServer -[#Blue]> dragonexServer: call`/api/v1/open/pay/user2app/do/`\n require PayTOken
dragonexServer -[#Blue]> appServer: payment result
dragonexServer -[#Blue]-> appServer: Asynchronous payment callbacks：\n callback success if received 200 HTTP status，\n it will retry periodically within 35 hours if callback fail 
autonumber stop

|||
|||

autonumber 1 1
note right of appServer: App server transfer to the user：Withdraw 
appServer -[#OrangeRed]> dragonexServer: call`/api/v1/open/pay/app2user/do/`
dragonexServer -[#OrangeRed]> appServer: payment result
dragonexServer -[#OrangeRed]-> appServer: Asynchronous payment callbacks：\n callback success if received 200 HTTP status，\n it will retry periodically within 35 hours if callback fail 
autonumber stop

@enduml

PlantUML version 1.2019.10(Sat Sep 14 04:53:03 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 13+33
Operating System: Mac OS X
Default Encoding: UTF-8
Language: zh
Country: CN
--></g></svg>